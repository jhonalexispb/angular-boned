<ng-container *ngIf="user$ | async as _user">
  <div class="card-body">
    <h4 *ngIf="_user.guia_prestamo?.productos_guia_prestamo.length > 0; else noItem" 
        class="fw-bold text-center text-primary mb-4">
      {{ _user.name }}, tienes productos en tu guía de préstamo
    </h4>

    <ng-template #noItem>
      <h4 class="text-success mb-4 text-center">
        {{ _user.name }}, no tienes ninguna guía de préstamo pendiente
      </h4>
    </ng-template>

    <div *ngIf="_user.guia_prestamo?.productos_guia_prestamo.length > 0" class="scroll-y mh-200px mh-lg-325px">
      <div *ngFor="let producto of _user.guia_prestamo.productos_guia_prestamo" 
           class="d-flex flex-column mb-3 p-3 border rounded-3">
        
        <div class="d-flex justify-content-between">
          <h5 class="fw-bold text-primary">{{ producto.nombre_completo }}</h5>
        </div>

        <div class="small mb-2 d-flex justify-content-between">
          <span class="me-2">Vencimiento: <strong>{{ producto.fecha_vencimiento }}</strong></span>
          <span class="badge bg-secondary">{{ producto.lote }}</span>
        </div>

        <div class="d-flex justify-content-between">
          <span>SKU:</span>
          <span>{{ producto.sku }}</span>
        </div>

        <div class="d-flex justify-content-between mt-1">
          <span>Stock:</span>
          <span>{{ producto.stock }}</span>
        </div>

        <div class="d-flex justify-content-between mt-1">
          <span>Precio Venta:</span>
          <span class="badge badge-light-success fw-bold">S/ {{ producto.pventa }}</span>
        </div>
      </div>
    </div>
  </div>
</ng-container>



